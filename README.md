# FocusFlow V4: The AI-Powered Wellness & Productivity Co-Pilot

 <!-- Optional: Create a banner image and upload it -->

FocusFlow is a comprehensive, agentic AI assistant designed to be a student's all-in-one co-pilot for managing not just their schedule, but their overall well-being. It moves beyond a simple task manager by integrating productivity, nutrition, and mental health into a single, gamified, and interactive platform.

This project was built to explore how modern AI tools can create truly personalized and proactive assistants that add genuine value to a user's daily life, making organization and self-care feel rewarding and effortless.

---

## üåü Core Features

FocusFlow is a multi-faceted application with several key modules, accessible via a web interface or a Telegram bot.

### 1. ü§ñ AI Scheduling Assistant (The Core)
- **Natural Language Scheduling:** Talk or type commands like "schedule a study session for tomorrow from 4pm to 7pm."
- **Intelligent Conflict Checking:** The AI automatically checks your Google Calendar for conflicts before adding new events.
- **Multi-Day Schedule Viewing:** Ask "what's my schedule for today?" or "what's on my calendar for Friday?" to get a clear summary.
- **Voice-Enabled Chat:** Use your voice to interact with the assistant in the Streamlit web app.

### 2. üèÜ Gamified Productivity Dashboard
- **XP & Leveling System:** Earn experience points for scheduling tasks, completing to-dos, and using the focus timer.
- **Streaks & Stats:** The dashboard tracks your daily streak and total tasks completed, providing a visual sense of accomplishment.
- **Active Quests:** Engage with quests like "Schedule your first 3 tasks" or "Complete 5 Focus Sessions" for bonus XP and motivation.

### 3. üóìÔ∏è AI Timetable Manager
- **Image-to-Calendar:** Upload a picture of your class timetable, and the AI will use Gemini Vision to parse it into a structured format.
- **Editable Schedule:** Review and edit the extracted details directly in the app.
- **One-Click Calendar Integration:** Add your entire weekly class schedule to your Google Calendar with a single button press.

### 4. üéØ The Focus Zone
- **Quick To-Do List:** A simple, satisfying to-do list where checking off items contributes to your daily XP.
- **Pomodoro Focus Timer:** A built-in timer to help you concentrate on tasks, with XP awarded for each completed session.

### 5. ü•ó AI Nutrition Coach
- **Personalized Meal Plans:** Set wellness goals (e.g., "Improve Focus," "Build Muscle") and get a full-day meal plan generated by AI.
- **Dietary Preference Support:** Customize your plan with preferences like "Vegetarian," "Indian," etc.
- **Agentic Shopping Lists:** Automatically generate a categorized shopping list from your meal plan with one click.

### 6. üéµ Mind & Mood Tracker
- **Mood Logging:** Easily log your current mood with a simple emoji-based interface.
- **AI-Powered Music Therapy:** Based on your logged mood, the app connects to the Spotify API to find and recommend a suitable playlist (e.g., "calm ambient" for stress, "upbeat focus" for work).
- **Proactive Wellness Agent:** The system passively monitors your mood log. If it detects a persistent negative pattern, it will proactively display a supportive message with links to mental health resources, demonstrating responsible agentic behavior.

### 7. ü§ñ Telegram Voice Note Agent
- **Asynchronous & Free:** Interact with your FocusFlow assistant from anywhere in the world, for free, using Telegram.
- **Voice Note Commands:** Simply record a voice note on Telegram with your command ("schedule lunch with my friend tomorrow at 1pm").
- **Full Integration:** The Telegram agent has access to the same scheduling and calendar-viewing capabilities as the web app, with confirmations sent directly to your chat.

---

## üõ†Ô∏è Tech Stack & Architecture

- **Front-End:** Streamlit (Multi-Page App)
- **AI Model:** Google Gemini 1.5 Flash
- **Backend / Agent Server:** Quart (an async Flask-like framework)
- **Agentic Communication:** Telegram Bot API
-   **Core Services & APIs:**
    - Google Calendar API (Scheduling)
    - Google Cloud Speech-to-Text (Voice Note Transcription)
    - Spotify Web API (Music Therapy)
- **Deployment:**
    - Streamlit App: Streamlit Community Cloud
    - Telegram Agent: Can be run locally with `ngrok` for tunneling.

---

## üöÄ Getting Started: How to Run the Project

This project consists of two main parts: the **Streamlit Web App** and the **Telegram Agent**. You must first onboard as a user through the web app to generate the necessary authentication token.

### Prerequisites
1.  Python 3.10+
2.  A Google Cloud project with the **Google Calendar API** and **Cloud Speech-to-Text API** enabled.
3.  A Spotify Developer account with an app created.
4.  A Telegram account and a bot created via **@BotFather**.
5.  `ngrok` installed for exposing the local agent server.

### Setup Instructions

1.  **Clone the Repository:**
    ```bash
    git clone https://github.com/your-username/focusflow_v3.git
    cd focusflow_v3
    ```

2.  **Install Dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Configure Secrets:**
    -   Create a file at `.streamlit/secrets.toml`.
    -   Add your API keys: `GOOGLE_API_KEY`, `TELEGRAM_BOT_TOKEN`, `SPOTIPY_CLIENT_ID`, `SPOTIPY_CLIENT_SECRET`, and `SPOTIPY_REDIRECT_URI`.

4.  **Configure Users:**
    -   Create a `telegram_users.json` file in the root directory.
    -   Add your user details, with your Telegram Chat ID as the key.
        ```json
        {
          "123456789": {
            "name": "Your Name",
            "timezone": "Your/Timezone",
            "google_token_path": "tokens/token_123456789.json"
          }
        }
        ```

### Running the System

#### Phase 1: Onboard and Generate Google Token
This step is required once for every new user.

1.  **Run the Streamlit App:**
    ```bash
    streamlit run app.py
    ```
2.  **Onboard:** Open the app in your browser. Enter your name, your Telegram Chat ID, and select your timezone.
3.  **Authenticate:** On the main hub page, click "Login with Google" and follow the on-screen instructions to grant calendar access. This will create your unique `token_...json` file in the `tokens/` directory.

#### Phase 2: Run the Telegram Agent
Now you can start the agent that listens for Telegram messages.

1.  **Start the Agent Server:** In a **new terminal**, run:
    ```bash
    python telegram_agent.py
    ```

2.  **Expose the Server with `ngrok`:** In a **third terminal**, run:
    ```bash
    ngrok http 5003
    ```
    Copy the `https://...ngrok-free.app` URL.

3.  **Set the Webhook:** In a **fourth terminal**, run the setup script to tell Telegram where to send messages.
    ```bash
    # On Windows
    set TELEGRAM_WEBHOOK_URL=https://your-ngrok-url.ngrok-free.app
    python setup_webhook.py

    # On Mac/Linux
    export TELEGRAM_WEBHOOK_URL=https://your-ngrok-url.ngrok-free.app
    python setup_webhook.py
    ```
    You should see a "webhook setup ok" confirmation.

4.  **Interact!** Your agent is now live. Open Telegram, find your bot, and send it a voice note or a text command!

---

##  Acknowledgements

This project was inspired by the need for smarter, more holistic tools to help students and professionals manage the increasing demands on their time and mental energy. It leverages the power of modern Large Language Models and cloud APIs to create a truly personalized and agentic experience.